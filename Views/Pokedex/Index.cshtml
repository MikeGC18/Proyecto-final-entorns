@model List<MVC.Models.PokemonListItem>
@{
    ViewData["Title"] = "Pokédex – Kanto";
}

<h1>Pokédex – 1ª Generación (151)</h1>

@for (int i = 0; i < Model.Count; i++)
{
    var p = Model[i];
    <details data-id="@p.Name">
        <summary>
            @($"{i + 1:000} – {char.ToUpper(p.Name[0]) + p.Name[1..]}")
        </summary>
        <div class="spinner"></div>
    </details>
}

<script>
// Carga la ficha al abrir el <details>
document.querySelectorAll('details').forEach(d => {
  d.addEventListener('toggle', async () => {
    if (!d.open || d.dataset.loaded) return;
    const placeholder = d.querySelector('.spinner');
    const id = d.dataset.id;
    const response = await fetch(`/Pokedex/Details/${id}`);
    placeholder.outerHTML = await response.text();
    d.dataset.loaded = "true";
  });
});
</script>